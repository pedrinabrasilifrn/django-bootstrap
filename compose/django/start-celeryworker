#!/bin/bash
set -e

echo "ğŸ‘· Iniciando Celery Worker..."
echo "ğŸ“Š DJANGO_ENV: ${DJANGO_ENV:-production}"

# Aguarda o Redis estar disponÃ­vel
echo "â³ Aguardando Redis..."
until nc -z redis 6379; do
    echo "Redis nÃ£o disponÃ­vel ainda - aguardando..."
    sleep 1
done
echo "âœ… Redis disponÃ­vel!"

exec celery -A core worker -l info

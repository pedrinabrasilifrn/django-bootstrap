#!/bin/bash
set -e

echo "ğŸš€ Iniciando entrypoint..."
echo "ğŸ“Š DJANGO_ENV: ${DJANGO_ENV:-production}"
echo "ğŸ› DEBUG: ${DEBUG:-False}"

# Apenas executa migrate se nÃ£o for um worker do Celery
if [[ "$1" != *"celery"* ]]; then
    echo "ğŸ”„ Executando migraÃ§Ãµes..."
    python manage.py migrate --noinput
else
    echo "â­ï¸  Pulando migraÃ§Ãµes (Celery worker/beat)"
fi

exec "$@"
